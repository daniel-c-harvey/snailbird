@using SnailbirdData.Models.Post;

@if (Element != null)
{
    @if (Element is FlexParagraph)
    {
        <p>
            @this.PostParagraph.Text
        </p>
    } else if (Element is FlexImage)
    {
        <img class="centeredimage" src="@PostImage.ImageURI" alt="@PostImage.AltText" />
    } else if (Element is FlexYouTubeEmbed)
    {
        <div class="centeredimage">
            <iframe class="youtubeframe"
                    src="@PostYouTubeEmbed.VideosURL"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen>
            </iframe>
        </div>
    } else if (Element is FlexInstrumentList)
    {
        <ul class="songdetails">
            @foreach (Instrument instrument in PostInstrumentList.Instruments)
            {
                <li>
                    <span class="instrument">@instrument.Name:</span> @instrument.Description
                </li>
            }
        </ul>
    }
}

@code {
    [Parameter]
    public SnailbirdData.Models.Post.FlexElement? Element { get; set; }

    protected FlexParagraph PostParagraph => Element as FlexParagraph ?? throw new ArgumentNullException(nameof(Element));
    protected FlexImage PostImage => Element as FlexImage ?? throw new ArgumentNullException(nameof(Element));
    protected FlexYouTubeEmbed PostYouTubeEmbed => Element as FlexYouTubeEmbed ?? throw new ArgumentNullException(nameof(Element));
    protected FlexInstrumentList PostInstrumentList => Element as FlexInstrumentList ?? throw new ArgumentNullException(nameof(Element));

}
